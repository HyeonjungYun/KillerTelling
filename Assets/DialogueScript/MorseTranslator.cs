using System.Collections.Generic;
using System.Text;
using UnityEngine;

public static class MorseTranslator
{
    // =========================================================
    // 1. ±âº» ¿µ¹®/¼ýÀÚ/Æ¯¼ö¹®ÀÚ ¸ÅÇÎ (±âÁ¸°ú µ¿ÀÏ)
    // =========================================================
    private static readonly Dictionary<char, string> BaseDictionary = new Dictionary<char, string>
    {
        {'A', ".-"}, {'B', "-..."}, {'C', "-.-."}, {'D', "-.."}, {'E', "."}, {'F', "..-."},
        {'G', "--."}, {'H', "...."}, {'I', ".."}, {'J', ".---"}, {'K', "-.-"}, {'L', ".-.."},
        {'M', "--"}, {'N', "-."}, {'O', "---"}, {'P', ".--."}, {'Q', "--.-"}, {'R', ".-."},
        {'S', "..."}, {'T', "-"}, {'U', "..-"}, {'V', "...-"}, {'W', ".--"}, {'X', "-..-"},
        {'Y', "-.--"}, {'Z', "--.."},
        {'0', "-----"}, {'1', ".----"}, {'2', "..---"}, {'3', "...--"}, {'4', "....-"},
        {'5', "....."}, {'6', "-...."}, {'7', "--..."}, {'8', "---.."}, {'9', "----."},
        {' ', "  "},
        {'.', ".-.-.-"}, {',', "--..--"}, {'?', "..--.."}, {'!', "-.-.--"}
    };

    // =========================================================
    // 2. ÇÑ±Û ÀÚ¸ð ¸ð½º ºÎÈ£ (ÇÑ±¹ Ç¥ÁØ)
    // =========================================================

    // ÃÊ¼º 19°³
    private static readonly string[] ChoMorse =
    {
        ".-..", // ¤¡
        ".-.. .-..", // ¤¢ (¤¡¤¡)
        "..-.", // ¤¤
        "-...", // ¤§
        "-... -...", // ¤¨ (¤§¤§)
        "...-", // ¤©
        "--", // ¤±
        ".--", // ¤²
        ".-- .--", // ¤³ (¤²¤²)
        "--.", // ¤µ
        "--. --.", // ¤¶ (¤µ¤µ)
        "-.-", // ¤·
        ".--.", // ¤¸
        ".--. .--.", // ¤¹ (¤¸¤¸)
        "-.-.", // ¤º
        "-..-", // ¤»
        "--..", // ¤¼
        "---", // ¤½
        ".---"  // ¤¾
    };

    // Áß¼º 21°³
    private static readonly string[] JungMorse =
    {
        ".", // ¤¿
        "..", // ¤À (¤¿+¤Ó·Îµµ ¾²Áö¸¸ Ç¥ÁØºÎÈ£´Â ..)
        "...", // ¤Á
        "...", // ¤Â (¤Á+¤Ó : ¤Á·Î ´ëÃ¼ÇÏ°Å³ª ... .. ·Î Ç¥Çö. ¿©±â¼± ¤Á·Î ÅëÀÏ)
        "-", // ¤Ã
        "-.--", // ¤Ä
        "..-", // ¤Å
        "..-", // ¤Æ (¤Å+¤Ó : ¿©±â¼± ¤Å·Î ÅëÀÏÇÏ°Å³ª ..- ..)
        ".-", // ¤Ç
        ".- .", // ¤È (¤Ç+¤¿)
        ".- ..", // ¤É (¤Ç+¤À)
        ".- ...-", // ¤Ê (¤Ç+¤Ó ÀÎµ¥ º¸Åë ...- ·Î ¾¸ or ¤Ç+¤Ó) -> Ç¥ÁØ: ...- (¤Ê)
        "-.", // ¤Ë
        "....", // ¤Ì
        ".... -", // ¤Í (¤Ì+¤Ã)
        ".... -.--", // ¤Î (¤Ì+¤Ä)
        ".... ...-", // ¤Ï (¤Ì+¤Ó) -> Ç¥ÁØ: .... ...-
        ".-..", // ¤Ð
        "-..", // ¤Ñ
        "-.. ...-", // ¤Ò (¤Ñ+¤Ó)
        "...-" // ¤Ó
    };
    // ¡Ø ÁÖ¼®: ÇÑ±Û ¸ð½º ºÎÈ£ Ç¥ÁØÀÌ Á¶±Ý º¹ÀâÇÏ¿©, °ÔÀÓ¿ëÀ¸·Î °¡Àå ³Î¸® ¾²ÀÌ´Â Á¶ÇÕ½ÄÀ¸·Î ±¸¼ºÇß½À´Ï´Ù.
    // ¤Ê(¤Ç+¤Ó), ¤Ï(¤Ì+¤Ó) µîÀº ÀÚ¸ð Á¶ÇÕ ¿øÄ¢À» µû¸¨´Ï´Ù.

    // Á¾¼º 28°³ (0¹øÀº Á¾¼º ¾øÀ½)
    private static readonly string[] JongMorse =
    {
        "",     // (¾øÀ½)
        ".-..", // ¤¡
        ".-.. .-..", // ¤¢
        ".-.. --.", // ¤£ (¤¡+¤µ)
        "..-.", // ¤¤
        "..-. .--.", // ¤¥ (¤¤+¤¸)
        "..-. .---", // ¤¦ (¤¤+¤¾)
        "-...", // ¤§
        "...-", // ¤©
        "...- .-..", // ¤ª (¤©+¤¡)
        "...- --", // ¤« (¤©+¤±)
        "...- .--", // ¤¬ (¤©+¤²)
        "...- --.", // ¤­ (¤©+¤µ)
        "...- --..", // ¤® (¤©+¤¼)
        "...- ---", // ¤¯ (¤©+¤½)
        "...- .---", // ¤° (¤©+¤¾)
        "--", // ¤±
        ".--", // ¤²
        ".-- --.", // ¤´ (¤²+¤µ)
        "--.", // ¤µ
        "--. --.", // ¤¶
        "-.-", // ¤·
        ".--.", // ¤¸
        "-.-.", // ¤º
        "-..-", // ¤»
        "--..", // ¤¼
        "---", // ¤½
        ".---"  // ¤¾
    };

    // =========================================================
    // 3. º¯È¯ ÇÔ¼ö
    // =========================================================
    public static string GetMorse(char c)
    {
        // 1) ÇÑ±ÛÀÎÁö È®ÀÎ (°¡ ~ ÆR)
        if (c >= 0xAC00 && c <= 0xD7A3)
        {
            return ConvertHangulToMorse(c);
        }

        // 2) ¿µ¾î/¼ýÀÚ/Æ¯¼ö¹®ÀÚÀÎÁö È®ÀÎ (´ë¹®ÀÚ·Î º¯È¯ ÈÄ °Ë»ö)
        char upperChar = char.ToUpper(c);
        if (BaseDictionary.TryGetValue(upperChar, out string morse))
        {
            return morse;
        }

        // 3) ¸ÅÇÎ ¾È µÈ ¹®ÀÚ´Â ±×´ë·Î ¹ÝÈ¯
        return c.ToString();
    }

    // ÇÑ±Û ÀÚ¼Ò ºÐ¸® ¹× º¯È¯ ·ÎÁ÷
    private static string ConvertHangulToMorse(char c)
    {
        int unicodeIndex = c - 0xAC00;

        int choIndex = unicodeIndex / (21 * 28);
        int jungIndex = (unicodeIndex / 28) % 21;
        int jongIndex = unicodeIndex % 28;

        StringBuilder sb = new StringBuilder();

        // ÃÊ¼º
        if (choIndex >= 0 && choIndex < ChoMorse.Length)
            sb.Append(ChoMorse[choIndex]);

        // Áß¼º (°ø¹éÀ¸·Î ±¸ºÐ)
        if (jungIndex >= 0 && jungIndex < JungMorse.Length)
        {
            if (sb.Length > 0) sb.Append(" ");
            sb.Append(JungMorse[jungIndex]);
        }

        // Á¾¼º (ÀÖÀ» °æ¿ì¸¸)
        if (jongIndex > 0 && jongIndex < JongMorse.Length)
        {
            if (sb.Length > 0) sb.Append(" ");
            sb.Append(JongMorse[jongIndex]);
        }

        return sb.ToString();
    }
}